{"version":3,"sources":["logo.svg","utils.bs.js","game.bs.js","double_click.bs.js","ui.bs.js","app.bs.js","index.bs.js"],"names":["module","exports","range","start","end_","cartesian","l1","l2","Belt_List","e","e$prime","shuffle","FieldsComparator","Belt_Id","cmp","param","param$1","c","Caml_primitive","x","y","empty","Belt_Map","empty$1","Belt_Set","neighbourDiff","Utils","fieldNeighboursSelector","state","field","height","width","adjacentMinesCountSelector","neighbour","fields","contents","minesCountSelector","remainingMinesCountSelector","visibility","markedCountSelector","gameStatusSelector","exploded","fieldState","safeRemaining","initializeState","mines","xs","ys","Pervasives","input","n","lst","taken","undefined","minedFields","fieldsWithContents","fieldsWithState","fieldsWithStateMap","map","Caml_int32","Caml_builtin_exceptions","makeStateWithFieldsState","accumulateFieldsToReveal","acc","match","accWithFieldRevealed","revealFields","toReveal","update","action","tag","state$1","revealedCountSelector","_state","safeField","reinitializeStateWithSafeField","neighbours","mines$1","toReveal$1","fields$1","field$1","newFieldState","fieldState$1","fields$2","make","Props","onSingleClick","onClick","onDoubleClick","children","lastClickAtRef","React","timeoutIdRef","evt","preventDefault","now","Date","isDoubleClick","current","id","clearTimeout","Caml_option","Curry","persist","timeoutId","setTimeout","arePropsEqual","oldProps","newProps","display","buttonContent","revealedClassName","String","contentClassName","className","Cn","Double_click","_evt","_event","type","reducer","Game","Game$1","buttonContents","send","width$1","height$1","gameStatus","rows","key","displayedFieldState","Block","remainingMines","require","logo","message","match$1","Ui","title","href","alt","src","target","ReactDOMRe","App"],"mappings":"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","file":"static/js/main.99ad7e6a.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.e2342b05.svg\";","// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n\nimport * as Belt_List from \"bs-platform/lib/es6/belt_List.js\";\n\nfunction range(start, end_) {\n  if (start >= end_) {\n    return /* [] */0;\n  } else {\n    return /* :: */[\n            start,\n            range(start + 1 | 0, end_)\n          ];\n  }\n}\n\nfunction cartesian(l1, l2) {\n  return Belt_List.flatten(Belt_List.map(l1, (function (e) {\n                    return Belt_List.map(l2, (function (e$prime) {\n                                  return /* tuple */[\n                                          e,\n                                          e$prime\n                                        ];\n                                }));\n                  })));\n}\n\nfunction take(n, lst) {\n  var taken = Belt_List.take(lst, n);\n  if (taken !== undefined) {\n    return taken;\n  } else {\n    return lst;\n  }\n}\n\nvar List;\n\nvar shuffle = Belt_List.shuffle;\n\nexport {\n  List ,\n  range ,\n  cartesian ,\n  shuffle ,\n  take ,\n  \n}\n/* No side effect */\n","// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n\nimport * as Utils from \"./utils.bs.js\";\nimport * as Belt_Id from \"bs-platform/lib/es6/belt_Id.js\";\nimport * as Belt_Map from \"bs-platform/lib/es6/belt_Map.js\";\nimport * as Belt_Set from \"bs-platform/lib/es6/belt_Set.js\";\nimport * as Belt_List from \"bs-platform/lib/es6/belt_List.js\";\nimport * as Caml_int32 from \"bs-platform/lib/es6/caml_int32.js\";\nimport * as Pervasives from \"bs-platform/lib/es6/pervasives.js\";\nimport * as Caml_primitive from \"bs-platform/lib/es6/caml_primitive.js\";\nimport * as Caml_builtin_exceptions from \"bs-platform/lib/es6/caml_builtin_exceptions.js\";\n\nfunction cmp(param, param$1) {\n  var c = Caml_primitive.caml_int_compare(param.x, param$1.x);\n  if (c !== 0) {\n    return c;\n  } else {\n    return Caml_primitive.caml_int_compare(param.y, param$1.y);\n  }\n}\n\nvar FieldsComparator = Belt_Id.MakeComparable({\n      cmp: cmp\n    });\n\nvar empty = Belt_Map.make(FieldsComparator);\n\nvar empty$1 = Belt_Set.make(FieldsComparator);\n\nvar neighbourDiff = Belt_List.keep(Utils.cartesian(/* :: */[\n          -1,\n          /* :: */[\n            0,\n            /* :: */[\n              1,\n              /* [] */0\n            ]\n          ]\n        ], /* :: */[\n          -1,\n          /* :: */[\n            0,\n            /* :: */[\n              1,\n              /* [] */0\n            ]\n          ]\n        ]), (function (param) {\n        if (param[0] !== 0) {\n          return true;\n        } else {\n          return param[1] !== 0;\n        }\n      }));\n\nif (Belt_List.length(neighbourDiff) !== 8) {\n  Pervasives.failwith(\"nighbourDiff should contain exactly 8 items\");\n}\n\nfunction gameWidthSelector(state) {\n  return state.width;\n}\n\nfunction gameHeightSelector(state) {\n  return state.height;\n}\n\nfunction fieldNeighboursSelector(state, field) {\n  var y = field.y;\n  var x = field.x;\n  var height = state.height;\n  var width = state.width;\n  return Belt_List.keep(Belt_List.map(neighbourDiff, (function (param) {\n                    return {\n                            x: x + param[0] | 0,\n                            y: y + param[1] | 0\n                          };\n                  })), (function (param) {\n                var y = param.y;\n                var x = param.x;\n                if (x >= 0 && x < width && y >= 0) {\n                  return y < height;\n                } else {\n                  return false;\n                }\n              }));\n}\n\nfunction fieldsSelector(state) {\n  return Belt_Map.toList(state.fields);\n}\n\nfunction fieldStateSelector(state, field) {\n  return Belt_Map.getExn(state.fields, field);\n}\n\nfunction adjacentMinesCountSelector(state, field) {\n  return Belt_List.length(Belt_List.keep(Belt_List.map(fieldNeighboursSelector(state, field), (function (neighbour) {\n                        return Belt_Map.getExn(state.fields, neighbour);\n                      })), (function (param) {\n                    return param.contents === /* Mine */0;\n                  })));\n}\n\nfunction minesCountSelector(state) {\n  return Belt_Map.size(Belt_Map.keep(state.fields, (function (param, param$1) {\n                    return param$1.contents === /* Mine */0;\n                  })));\n}\n\nfunction markedCountSelector(state) {\n  return Belt_Map.size(Belt_Map.keep(state.fields, (function (param, param$1) {\n                    return param$1.visibility === /* Marked */2;\n                  })));\n}\n\nfunction revealedCountSelector(state) {\n  return Belt_Map.size(Belt_Map.keep(state.fields, (function (param, param$1) {\n                    return param$1.visibility === /* Revealed */1;\n                  })));\n}\n\nfunction remainingMinesCountSelector(state) {\n  var mines = minesCountSelector(state);\n  var marked = markedCountSelector(state);\n  return mines - marked | 0;\n}\n\nfunction gameStatusSelector(state) {\n  var fields = state.fields;\n  var exploded = Belt_Map.some(fields, (function (param, fieldState) {\n          if (fieldState.contents) {\n            return false;\n          } else {\n            return fieldState.visibility === 1;\n          }\n        }));\n  var safeRemaining = Belt_Map.some(fields, (function (param, fieldState) {\n          if (fieldState.contents) {\n            return fieldState.visibility === 0;\n          } else {\n            return false;\n          }\n        }));\n  if (exploded) {\n    return /* Lost */2;\n  } else if (safeRemaining) {\n    return /* Playing */0;\n  } else {\n    return /* Won */1;\n  }\n}\n\nfunction makeStateWithFieldsState(width, height, fieldsWithState) {\n  var add2 = function (map, param) {\n    return Belt_Map.set(map, param[0], param[1]);\n  };\n  var fieldsWithStateMap = Belt_List.reduce(fieldsWithState, empty, add2);\n  if (Belt_Map.size(fieldsWithStateMap) !== Caml_int32.imul(width, height)) {\n    throw [\n          Caml_builtin_exceptions.assert_failure,\n          /* tuple */[\n            \"game.re\",\n            146,\n            2\n          ]\n        ];\n  }\n  return {\n          width: width,\n          height: height,\n          fields: fieldsWithStateMap\n        };\n}\n\nfunction initializeState(width, height, mines) {\n  var xs = Utils.range(0, width);\n  var ys = Utils.range(0, height);\n  var fields = Belt_List.map(Utils.cartesian(xs, ys), (function (param) {\n          return {\n                  x: param[0],\n                  y: param[1]\n                };\n        }));\n  if (Belt_List.length(fields) <= mines) {\n    Pervasives.failwith(\"Too many mines for the board\");\n  }\n  var input = Utils.take(mines, Utils.shuffle(fields));\n  var minedFields = Belt_Set.mergeMany(empty$1, Belt_List.toArray(input));\n  var makeFieldWithContents = function (field) {\n    var contents = Belt_Set.has(minedFields, field) ? /* Mine */0 : /* Safe */1;\n    return /* tuple */[\n            field,\n            contents\n          ];\n  };\n  var fieldsWithContents = Belt_List.map(fields, makeFieldWithContents);\n  var fieldsWithState = Belt_List.map(fieldsWithContents, (function (param) {\n          return /* tuple */[\n                  param[0],\n                  {\n                    contents: param[1],\n                    visibility: /* Hidden */0\n                  }\n                ];\n        }));\n  return makeStateWithFieldsState(width, height, fieldsWithState);\n}\n\nfunction reinitializeStateWithSafeField(_state, width, height, mines, safeField) {\n  while(true) {\n    var state = _state;\n    var match = Belt_Map.getExn(state.fields, safeField);\n    if (match.contents) {\n      return state;\n    }\n    var newState = initializeState(width, height, mines);\n    _state = newState;\n    continue ;\n  };\n}\n\nfunction accumulateFieldsToReveal(state, field, acc) {\n  var match = Belt_Map.getExn(state.fields, field);\n  var mines = adjacentMinesCountSelector(state, field);\n  var accWithFieldRevealed = Belt_Set.add(acc, field);\n  if (mines !== 0) {\n    return accWithFieldRevealed;\n  }\n  if (!match.contents) {\n    return accWithFieldRevealed;\n  }\n  var visitNeighbour = function (acc, neighbour) {\n    if (Belt_Set.has(acc, neighbour)) {\n      return acc;\n    } else {\n      return accumulateFieldsToReveal(state, neighbour, acc);\n    }\n  };\n  return Belt_List.reduce(fieldNeighboursSelector(state, field), accWithFieldRevealed, visitNeighbour);\n}\n\nfunction revealFields(state, toReveal) {\n  return Belt_Map.mapWithKey(state.fields, (function (field, fieldState) {\n                var shouldReveal = Belt_Set.has(toReveal, field);\n                if (shouldReveal) {\n                  return {\n                          contents: fieldState.contents,\n                          visibility: /* Revealed */1\n                        };\n                } else {\n                  return fieldState;\n                }\n              }));\n}\n\nfunction update(action, state) {\n  switch (action.tag | 0) {\n    case /* Init */0 :\n        return action[0];\n    case /* Reveal */1 :\n        var field = action[0];\n        if (gameStatusSelector(state) !== /* Playing */0) {\n          return state;\n        }\n        var firstReveal = revealedCountSelector(state) === 0;\n        var state$1;\n        if (firstReveal) {\n          var mines = minesCountSelector(state);\n          state$1 = reinitializeStateWithSafeField(state, state.width, state.height, mines, field);\n        } else {\n          state$1 = state;\n        }\n        var fieldState = Belt_Map.getExn(state$1.fields, field);\n        if (fieldState.visibility !== 1) {\n          var toReveal = accumulateFieldsToReveal(state$1, field, empty$1);\n          var fields = revealFields(state$1, toReveal);\n          return {\n                  width: state$1.width,\n                  height: state$1.height,\n                  fields: fields\n                };\n        }\n        var neighbours = fieldNeighboursSelector(state$1, field);\n        var match = Belt_List.partition(neighbours, (function (neighbour) {\n                var match = Belt_Map.getExn(state$1.fields, neighbour);\n                return match.visibility >= 2;\n              }));\n        var mines$1 = adjacentMinesCountSelector(state$1, field);\n        if (Belt_List.length(match[0]) !== mines$1) {\n          return state$1;\n        }\n        var toReveal$1 = Belt_List.reduce(Belt_List.map(match[1], (function (param) {\n                    return accumulateFieldsToReveal(state$1, param, empty$1);\n                  })), empty$1, Belt_Set.union);\n        var fields$1 = revealFields(state$1, toReveal$1);\n        return {\n                width: state$1.width,\n                height: state$1.height,\n                fields: fields$1\n              };\n    case /* ToggleMarker */2 :\n        var field$1 = action[0];\n        if (gameStatusSelector(state) !== /* Playing */0) {\n          return state;\n        }\n        var fieldState$1 = Belt_Map.getExn(state.fields, field$1);\n        var newFieldState;\n        switch (fieldState$1.visibility) {\n          case /* Hidden */0 :\n              newFieldState = {\n                contents: fieldState$1.contents,\n                visibility: /* Marked */2\n              };\n              break;\n          case /* Revealed */1 :\n              newFieldState = undefined;\n              break;\n          case /* Marked */2 :\n              newFieldState = {\n                contents: fieldState$1.contents,\n                visibility: /* Hidden */0\n              };\n              break;\n          \n        }\n        if (newFieldState === undefined) {\n          return state;\n        }\n        var fields$2 = Belt_Map.set(state.fields, field$1, newFieldState);\n        return {\n                width: state.width,\n                height: state.height,\n                fields: fields$2\n              };\n    \n  }\n}\n\nexport {\n  initializeState ,\n  makeStateWithFieldsState ,\n  gameWidthSelector ,\n  gameHeightSelector ,\n  gameStatusSelector ,\n  fieldsSelector ,\n  fieldStateSelector ,\n  adjacentMinesCountSelector ,\n  remainingMinesCountSelector ,\n  update ,\n  \n}\n/* FieldsComparator Not a pure module */\n","// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n\nimport * as Curry from \"bs-platform/lib/es6/curry.js\";\nimport * as React from \"react\";\nimport * as Caml_option from \"bs-platform/lib/es6/caml_option.js\";\n\nfunction Double_click(Props) {\n  var onSingleClick = Props.onClick;\n  var onDoubleClick = Props.onDoubleClick;\n  var children = Props.children;\n  var lastClickAtRef = React.useRef(0.0);\n  var timeoutIdRef = React.useRef(undefined);\n  var onClick = function (evt) {\n    evt.preventDefault();\n    var now = Date.now();\n    var lastClickAt = lastClickAtRef.current;\n    var isDoubleClick = lastClickAt + 200.0 > now;\n    lastClickAtRef.current = now;\n    var id = timeoutIdRef.current;\n    if (id !== undefined) {\n      clearTimeout(Caml_option.valFromOption(id));\n    }\n    if (isDoubleClick) {\n      return Curry._1(onDoubleClick, evt);\n    }\n    evt.persist();\n    var timeoutId = setTimeout((function (param) {\n            return Curry._1(onSingleClick, evt);\n          }), 200);\n    timeoutIdRef.current = Caml_option.some(timeoutId);\n    \n  };\n  return React.createElement(\"div\", {\n              onClick: onClick\n            }, children);\n}\n\nvar thresholdMs = 200.0;\n\nvar make = Double_click;\n\nexport {\n  thresholdMs ,\n  make ,\n  \n}\n/* react Not a pure module */\n","// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n\nimport * as Cn from \"re-classnames/src/Cn.bs.js\";\nimport * as Game from \"./game.bs.js\";\nimport * as Block from \"bs-platform/lib/es6/block.js\";\nimport * as Curry from \"bs-platform/lib/es6/curry.js\";\nimport * as Utils from \"./utils.bs.js\";\nimport * as React from \"react\";\nimport * as Belt_List from \"bs-platform/lib/es6/belt_List.js\";\nimport * as Double_click from \"./double_click.bs.js\";\n\nfunction Ui$Field(Props) {\n  var mines = Props.mines;\n  var field = Props.field;\n  var fieldState = Props.fieldState;\n  var onClick = Props.onClick;\n  var onDoubleClick = Props.onDoubleClick;\n  var display;\n  switch (fieldState.visibility) {\n    case /* Hidden */0 :\n        display = /* Hidden */0;\n        break;\n    case /* Revealed */1 :\n        display = fieldState.contents ? /* Safe */[/* mines */mines] : /* Exploded */2;\n        break;\n    case /* Marked */2 :\n        display = /* Marked */1;\n        break;\n    \n  }\n  var buttonContent;\n  if (typeof display === \"number\") {\n    switch (display) {\n      case /* Hidden */0 :\n          buttonContent = null;\n          break;\n      case /* Marked */1 :\n          buttonContent = \"🚩\";\n          break;\n      case /* Exploded */2 :\n          buttonContent = \"💥\";\n          break;\n      \n    }\n  } else {\n    buttonContent = display[/* mines */0];\n  }\n  var baseClassName = \"game__board-field\";\n  var revealedClassName = typeof display === \"number\" ? (\n      display >= 2 ? \"\" + (String(baseClassName) + \"--revealed\") : \"\"\n    ) : \"\" + (String(baseClassName) + \"--revealed\");\n  var contentClassName = typeof display === \"number\" ? (\n      display >= 2 ? \"\" + (String(baseClassName) + \"--exploded\") : \"\"\n    ) : \"\" + (String(baseClassName) + (\"--\" + (String(display[/* mines */0]) + \"\")));\n  var className = Cn.make(/* :: */[\n        baseClassName,\n        /* :: */[\n          revealedClassName,\n          /* :: */[\n            contentClassName,\n            /* [] */0\n          ]\n        ]\n      ]);\n  var onClick$1 = function (_evt) {\n    return Curry._1(onClick, field);\n  };\n  var onDoubleClick$1 = function (_event) {\n    return Curry._1(onDoubleClick, field);\n  };\n  return React.createElement(Double_click.make, {\n              onClick: onClick$1,\n              onDoubleClick: onDoubleClick$1,\n              children: React.createElement(\"div\", {\n                    className: className\n                  }, React.createElement(\"button\", {\n                        type: \"button\"\n                      }, buttonContent))\n            });\n}\n\nfunction arePropsEqual(oldProps, newProps) {\n  var oldState = oldProps.fieldState;\n  var newState = newProps.fieldState;\n  return oldState === newState;\n}\n\nvar make = React.memo(Ui$Field, arePropsEqual);\n\nvar Field = {\n  arePropsEqual: arePropsEqual,\n  make: make\n};\n\nfunction reducer(state, action) {\n  return Game.update(action, state);\n}\n\nfunction Ui$Game(Props) {\n  var width = Props.width;\n  var height = Props.height;\n  var mines = Props.mines;\n  var match = React.useReducer(reducer, undefined, (function (param) {\n          return Game.initializeState(width, height, mines);\n        }));\n  var send = match[1];\n  var state = match[0];\n  var width$1 = Game.gameWidthSelector(state);\n  var height$1 = Game.gameHeightSelector(state);\n  var xs = Utils.range(0, width$1);\n  var ys = Utils.range(0, height$1);\n  var gameStatus = Game.gameStatusSelector(state);\n  var rows = Belt_List.toArray(Belt_List.map(ys, (function (y) {\n              return React.createElement(\"div\", {\n                          key: String(y),\n                          className: \"game__board-row\"\n                        }, Belt_List.toArray(Belt_List.map(xs, (function (x) {\n                                    var field = {\n                                      x: x,\n                                      y: y\n                                    };\n                                    var fieldState = Game.fieldStateSelector(state, field);\n                                    var displayedFieldState = gameStatus !== 1 || fieldState.contents ? fieldState : ({\n                                          contents: /* Mine */0,\n                                          visibility: /* Marked */2\n                                        });\n                                    var onClick = function (field) {\n                                      return Curry._1(send, /* ToggleMarker */Block.__(2, [field]));\n                                    };\n                                    var onDoubleClick = function (field) {\n                                      return Curry._1(send, /* Reveal */Block.__(1, [field]));\n                                    };\n                                    var mines = Game.adjacentMinesCountSelector(state, field);\n                                    return React.createElement(make, {\n                                                mines: mines,\n                                                field: field,\n                                                fieldState: displayedFieldState,\n                                                onClick: onClick,\n                                                onDoubleClick: onDoubleClick,\n                                                key: String(x)\n                                              });\n                                  }))));\n            })));\n  var buttonContents;\n  switch (gameStatus) {\n    case /* Playing */0 :\n        buttonContents = \"🙂\";\n        break;\n    case /* Won */1 :\n        buttonContents = \"😎\";\n        break;\n    case /* Lost */2 :\n        buttonContents = \"😵\";\n        break;\n    \n  }\n  var startButtonClick = function (_evt) {\n    return Curry._1(send, /* Init */Block.__(0, [Game.initializeState(width$1, height$1, mines)]));\n  };\n  var remainingMines = Game.remainingMinesCountSelector(state);\n  return React.createElement(\"section\", {\n              className: \"game__wrapper\"\n            }, React.createElement(\"div\", {\n                  className: \"game\"\n                }, React.createElement(\"div\", {\n                      className: \"game__header\"\n                    }, React.createElement(\"div\", {\n                          className: \"game__remaining-mines\"\n                        }, remainingMines), React.createElement(\"button\", {\n                          className: \"game__start-button\",\n                          type: \"button\",\n                          onClick: startButtonClick\n                        }, buttonContents)), React.createElement(\"div\", {\n                      className: \"game__board\"\n                    }, rows)), React.createElement(\"p\", {\n                  className: \"instructions\"\n                }, \"double-click to reveal a field / click to mark a field\"));\n}\n\nvar Game$1 = {\n  reducer: reducer,\n  make: Ui$Game\n};\n\nexport {\n  Field ,\n  Game$1 as Game,\n  \n}\n/* make Not a pure module */\n","// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n\nimport * as Ui from \"./ui.bs.js\";\nimport * as Curry from \"bs-platform/lib/es6/curry.js\";\nimport * as React from \"react\";\n\n((require('./app.css')));\n\nvar logo = (require('./logo.svg'));\n\nfunction reducer(_state, action) {\n  return action[0];\n}\n\nfunction App(Props) {\n  var message = Props.message;\n  var match = React.useReducer(reducer, undefined);\n  var send = match[1];\n  var state = match[0];\n  var contents;\n  if (state !== undefined) {\n    var match$1;\n    switch (state) {\n      case /* Easy */0 :\n          match$1 = /* tuple */[\n            9,\n            9,\n            10\n          ];\n          break;\n      case /* Normal */1 :\n          match$1 = /* tuple */[\n            16,\n            16,\n            40\n          ];\n          break;\n      case /* Hard */2 :\n          match$1 = /* tuple */[\n            30,\n            16,\n            99\n          ];\n          break;\n      \n    }\n    contents = React.createElement(Ui.Game.make, {\n          width: match$1[0],\n          height: match$1[1],\n          mines: match$1[2]\n        });\n  } else {\n    contents = React.createElement(\"div\", {\n          className: \"difficulties__wrapper\"\n        }, React.createElement(\"h3\", undefined, \"Choose difficulty\"), React.createElement(\"div\", {\n              className: \"difficulties\"\n            }, React.createElement(\"button\", {\n                  className: \"difficulty\",\n                  title: \"Easy\",\n                  type: \"button\",\n                  onClick: (function (param) {\n                      return Curry._1(send, /* ChooseDifficulty */[/* Easy */0]);\n                    })\n                }, \"😌\"), React.createElement(\"button\", {\n                  className: \"difficulty\",\n                  title: \"Normal\",\n                  type: \"button\",\n                  onClick: (function (param) {\n                      return Curry._1(send, /* ChooseDifficulty */[/* Normal */1]);\n                    })\n                }, \"😐\"), React.createElement(\"button\", {\n                  className: \"difficulty\",\n                  title: \"Hard\",\n                  type: \"button\",\n                  onClick: (function (param) {\n                      return Curry._1(send, /* ChooseDifficulty */[/* Hard */2]);\n                    })\n                }, \"😱\")));\n  }\n  return React.createElement(\"div\", {\n              className: \"app\"\n            }, React.createElement(\"div\", {\n                  className: \"app__header\"\n                }, React.createElement(\"a\", {\n                      href: \"\"\n                    }, React.createElement(\"img\", {\n                          className: \"app__logo\",\n                          alt: \"logo\",\n                          src: logo\n                        })), React.createElement(\"h2\", undefined, message), React.createElement(\"p\", {\n                      className: \"app__credits\"\n                    }, \"by \", React.createElement(\"a\", {\n                          href: \"http://pewniak747.info\",\n                          target: \"_blank\"\n                        }, \"Tomasz Pewiński\"), \" · \", React.createElement(\"a\", {\n                          href: \"https://github.com/pewniak747/minesweeper-reasonml\",\n                          target: \"_blank\"\n                        }, \"source\"))), React.createElement(\"div\", {\n                  className: \"app__intro\"\n                }, contents));\n}\n\nvar make = App;\n\nexport {\n  logo ,\n  reducer ,\n  make ,\n  \n}\n/*  Not a pure module */\n","// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n\nimport * as App from \"./app.bs.js\";\nimport * as React from \"react\";\nimport * as ReactDOMRe from \"reason-react/src/ReactDOMRe.js\";\n\n((require('./index.css')));\n\nReactDOMRe.renderToElementWithId(React.createElement(App.make, {\n          message: \"Minesweeper in ReasonML & React\"\n        }), \"root\");\n\nexport {\n  \n}\n/*  Not a pure module */\n"],"sourceRoot":""}