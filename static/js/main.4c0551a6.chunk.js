(this["webpackJsonpminesweeper-reasonml"]=this["webpackJsonpminesweeper-reasonml"]||[]).push([[0],{24:function(e,t,n){e.exports=n(32)},26:function(e,t,n){},27:function(e,t,n){e.exports=n.p+"static/media/logo.e2342b05.svg"},31:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var r=n(23),i=n(7);function a(e,t){return e>=t?0:[e,a(e+1|0,t)]}function c(e,t){return i.a(i.d(e,(function(e){return i.d(t,(function(t){return[e,t]}))})))}var u=i.g,o=n(20),s=n(10),l=n(13),f=n(12),d=n(16),m=n(8),v=n(1);var b=o.a({cmp:function(e,t){var n=m.d(e.x,t.x);return 0!==n?n:m.d(e.y,t.y)}}),h=s.c(b),g=l.c(b);var p=i.b(c([-1,[0,[1,0]]],[-1,[0,[1,0]]]),(function(e){return 0!==e[0]||0!==e[1]}));function y(e,t){var n=t.y,r=t.x,a=e.height,c=e.width;return i.b(i.d(p,(function(e){return{x:r+e[0]|0,y:n+e[1]|0}})),(function(e){var t=e.y,n=e.x;return n>=0&&n<c&&t>=0&&t<a}))}function k(e,t){return i.c(i.b(i.d(y(e,t),(function(t){return s.a(e.fields,t)})),(function(e){return 0===e.contents})))}function _(e){return s.f(s.b(e.fields,(function(e,t){return 0===t.contents})))}function w(e){return _(e)-function(e){return s.f(s.b(e.fields,(function(e,t){return 2===t.visibility})))}(e)|0}function E(e){var t=e.fields,n=s.g(t,(function(e,t){return!t.contents&&1===t.visibility})),r=s.g(t,(function(e,t){return!!t.contents&&0===t.visibility}));return n?2:r?0:1}function N(e,t,n){var r=a(0,e),o=a(0,t),m=i.d(c(r,o),(function(e){return{x:e[0],y:e[1]}}));i.c(m)<=n&&d.a("Too many mines for the board");var b=function(e){var t=i.i(e);return l.d(g,t)}(function(e,t){var n=i.h(t,e);return void 0!==n?n:t}(n,u(m))),p=i.d(m,(function(e){return[e,l.b(b,e)?0:1]}));return function(e,t,n){var r=i.f(n,h,(function(e,t){return s.e(e,t[0],t[1])}));if(s.f(r)!==f.b(e,t))throw[v.a,["game.re",146,2]];return{width:e,height:t,fields:r}}(e,t,i.d(p,(function(e){return[e[0],{contents:e[1],visibility:0}]})))}function C(e,t,n){var r=s.a(e.fields,t),a=k(e,t),c=l.a(n,t);if(0===a&&r.contents){return i.f(y(e,t),c,(function(t,n){return l.b(t,n)?t:C(e,n,t)}))}return c}function S(e,t){return s.d(e.fields,(function(e,n){return l.b(t,e)?{contents:n.contents,visibility:1}:n}))}function x(e,t){switch(0|e.tag){case 0:return e[0];case 1:var n=e[0];if(0===E(t)){var r;if(0===function(e){return s.f(s.b(e.fields,(function(e,t){return 1===t.visibility})))}(t)){var a=_(t);r=function(e,t,n,r,i){for(;;){var a=e;if(s.a(a.fields,i).contents)return a;e=N(t,n,r)}}(t,t.width,t.height,a,n)}else r=t;if(1!==s.a(r.fields,n).visibility){var c=C(r,n,g),u=S(r,c);return{width:r.width,height:r.height,fields:u}}var o=y(r,n),f=i.e(o,(function(e){return s.a(r.fields,e).visibility>=2})),d=k(r,n);if(i.c(f[0])===d){var m=i.f(i.d(f[1],(function(e){return C(r,e,g)})),g,l.e),v=S(r,m);return{width:r.width,height:r.height,fields:v}}return r}return t;case 2:var b=e[0];if(0===E(t)){var h,p=s.a(t.fields,b);switch(p.visibility){case 0:h={contents:p.contents,visibility:2};break;case 1:h=void 0;break;case 2:h={contents:p.contents,visibility:0}}if(void 0!==h){var w=s.e(t.fields,b,h);return{width:t.width,height:t.height,fields:w}}return t}return t}}8!==i.c(p)&&d.a("nighbourDiff should contain exactly 8 items");var D=n(3),R=n(0),T=n(4),J=n(6);var M=function(e){var t=e.onClick,n=e.onDoubleClick,r=e.children,i=T.useRef(0),a=T.useRef(void 0);return T.createElement("div",{onClick:function(e){e.preventDefault();var r=Date.now(),c=i.current+200>r;i.current=r;var u=a.current;if(void 0!==u&&clearTimeout(J.b(u)),c)return R.a(n,e);e.persist();var o=setTimeout((function(n){return R.a(t,e)}),200);return a.current=J.a(o),0}},r)};function z(e,t){return e.fieldState===t.fieldState}var H=T.memo((function(e){var t,n,i=e.mines,a=e.field,c=e.fieldState,u=e.onClick,o=e.onDoubleClick;switch(c.visibility){case 0:t=0;break;case 1:t=c.contents?[i]:2;break;case 2:t=1}if("number"===typeof t)switch(t){case 0:n="";break;case 1:n="\ud83d\udea9";break;case 2:n="\ud83d\udca5"}else n=String(t[0]);var s="number"===typeof t?t>=2?String("game__board-field")+"--revealed":"":String("game__board-field")+"--revealed",l="number"===typeof t?t>=2?String("game__board-field")+"--exploded":"":String("game__board-field")+"--"+String(t[0]),f=r.a(["game__board-field",[s,[l,0]]]);return T.createElement(M,{onClick:function(e){return R.a(u,a)},onDoubleClick:function(e){return R.a(o,a)},children:T.createElement("div",{className:f},T.createElement("button",{type:"button"},n))})}),z);function L(e,t){return x(t,e)}var P={reducer:L,make:function(e){var t,n=e.width,r=e.height,c=e.mines,u=T.useReducer(L,0,(function(e){return N(n,r,c)})),o=u[1],l=u[0],f=function(e){return e.width}(l),d=function(e){return e.height}(l),m=a(0,f),v=a(0,d),b=E(l),h=i.i(i.d(v,(function(e){return T.createElement("div",{key:String(e),className:"game__board-row"},i.i(i.d(m,(function(t){var n={x:t,y:e},r=function(e,t){return s.a(e.fields,t)}(l,n),i=1!==b||r.contents?r:{contents:0,visibility:2},a=k(l,n);return T.createElement(H,{mines:a,field:n,fieldState:i,onClick:function(e){return R.a(o,D.a(2,[e]))},onDoubleClick:function(e){return R.a(o,D.a(1,[e]))},key:String(t)})}))))})));switch(b){case 0:t="\ud83d\ude42";break;case 1:t="\ud83d\ude0e";break;case 2:t="\ud83d\ude35"}var g=w(l);return T.createElement("section",{className:"game__wrapper"},T.createElement("div",{className:"game"},T.createElement("div",{className:"game__header"},T.createElement("div",{className:"game__remaining-mines"},String(g)),T.createElement("button",{className:"game__start-button",type:"button",onClick:function(e){return R.a(o,D.a(0,[N(f,d,c)]))}},t)),T.createElement("div",{className:"game__board"},h)),T.createElement("p",{className:"instructions"},"double-click to reveal a field / click to mark a field"))}};n(26);var j=n(27);function q(e,t){return t[0]}var A=function(e){var t,n=e.message,r=T.useReducer(q,void 0),i=r[1],a=r[0];if(void 0!==a){var c;switch(a){case 0:c=[9,9,10];break;case 1:c=[16,16,40];break;case 2:c=[30,16,99]}t=T.createElement(P.make,{width:c[0],height:c[1],mines:c[2]})}else t=T.createElement("div",{className:"difficulties__wrapper"},T.createElement("h3",void 0,"Choose difficulty"),T.createElement("div",{className:"difficulties"},T.createElement("button",{className:"difficulty",title:"Easy",type:"button",onClick:function(e){return R.a(i,[0])}},"\ud83d\ude0c"),T.createElement("button",{className:"difficulty",title:"Normal",type:"button",onClick:function(e){return R.a(i,[1])}},"\ud83d\ude10"),T.createElement("button",{className:"difficulty",title:"Hard",type:"button",onClick:function(e){return R.a(i,[2])}},"\ud83d\ude31")));return T.createElement("div",{className:"app"},T.createElement("div",{className:"app__header"},T.createElement("a",{href:""},T.createElement("img",{className:"app__logo",alt:"logo",src:j})),T.createElement("h2",void 0,n),T.createElement("p",{className:"app__credits"},"by ",T.createElement("a",{href:"http://pewniak747.info",target:"_blank"},"Tomasz Pewi\u0144ski")," \xb7 ",T.createElement("a",{href:"https://github.com/pewniak747/minesweeper-reasonml",target:"_blank"},"source"))),T.createElement("div",{className:"app__intro"},t))},B=n(22);n(31),B.a(T.createElement(A,{message:"Minesweeper in ReasonML & React"}),"root")}},[[24,1,2]]]);
//# sourceMappingURL=main.4c0551a6.chunk.js.map