(this["webpackJsonpminesweeper-reasonml"]=this["webpackJsonpminesweeper-reasonml"]||[]).push([[0],{24:function(e,t,n){e.exports=n(31)},26:function(e,t,n){e.exports=n.p+"static/media/logo.e2342b05.svg"},30:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var i=n(23),r=n(0),a=n(5);function c(e,t){return e>=t?0:{hd:e,tl:c(e+1|0,t)}}function u(e,t){return a.a(a.d(e,(function(e){return a.d(t,(function(t){return[e,t]}))})))}var o=a.g,s=n(3),l=n(2),f=n(20),d=n(8),m=n(11),v=n(16),h=n(6);var b=f.a({cmp:function(e,t){var n=h.d(e.x,t.x);return 0!==n?n:h.d(e.y,t.y)}}),_=d.c(b),p=m.c(b),g=a.b(u({hd:-1,tl:{hd:0,tl:{hd:1,tl:0}}},{hd:-1,tl:{hd:0,tl:{hd:1,tl:0}}}),(function(e){return 0!==e[0]||0!==e[1]}));function y(e,t){var n=t.y,i=t.x,r=e.height,c=e.width;return a.b(a.d(g,(function(e){return{x:i+e[0]|0,y:n+e[1]|0}})),(function(e){var t=e.y,n=e.x;return n>=0&&n<c&&t>=0&&t<r}))}function k(e,t){return a.c(a.b(a.d(y(e,t),(function(t){return d.a(e.fields,t)})),(function(e){return 0===e.contents})))}function E(e){return d.f(d.b(e.fields,(function(e,t){return 0===t.contents})))}function w(e){return E(e)-function(e){return d.f(d.b(e.fields,(function(e,t){return 2===t.visibility})))}(e)|0}function N(e){var t=e.fields,n=d.g(t,(function(e,t){return!t.contents&&1===t.visibility})),i=d.g(t,(function(e,t){return!!t.contents&&0===t.visibility}));return n?2:i?0:1}function C(e,t,n){var i=c(0,e),r=c(0,t),s=a.d(u(i,r),(function(e){return{x:e[0],y:e[1]}}));a.c(s)<=n&&v.a("Too many mines for the board");var l=function(e,t){var n=a.h(t,e);return void 0!==n?n:t}(n,o(s)),f=m.d(p,a.i(l)),h=a.d(s,(function(e){return[e,m.b(f,e)?0:1]}));return function(e,t,n){var i=a.f(n,_,(function(e,t){return d.e(e,t[0],t[1])}));if(d.f(i)!==Math.imul(e,t))throw{RE_EXN_ID:"Assert_failure",_1:["minesweeper.res",138,2],Error:new Error};return{width:e,height:t,fields:i}}(e,t,a.d(h,(function(e){return[e[0],{contents:e[1],visibility:0}]})))}function x(e,t,n){var i=d.a(e.fields,t),r=k(e,t),c=m.a(n,t);if(0!==r)return c;if(!i.contents)return c;return a.f(y(e,t),c,(function(t,n){return m.b(t,n)?t:x(e,n,t)}))}function D(e,t){return d.d(e.fields,(function(e,n){return m.b(t,e)?{contents:n.contents,visibility:1}:n}))}function S(e,t){switch(0|e.TAG){case 0:return e._0;case 1:var n,i=e._0;if(0!==N(t))return t;if(0===function(e){return d.f(d.b(e.fields,(function(e,t){return 1===t.visibility})))}(t)){var r=E(t);n=function(e,t,n,i,r){for(;;){var a=e;if(d.a(a.fields,r).contents)return a;e=C(t,n,i)}}(t,t.width,t.height,r,i)}else n=t;if(1!==d.a(n.fields,i).visibility){var c=x(n,i,p),u=D(n,c);return{width:n.width,height:n.height,fields:u}}var o=y(n,i),s=a.e(o,(function(e){return d.a(n.fields,e).visibility>=2})),l=k(n,i);if(a.c(s[0])!==l)return n;var f=a.f(a.d(s[1],(function(e){return x(n,e,p)})),p,m.e),v=D(n,f);return{width:n.width,height:n.height,fields:v};case 2:var h=e._0;if(0!==N(t))return t;var b,_=d.a(t.fields,h);switch(_.visibility){case 0:b={contents:_.contents,visibility:2};break;case 1:b=void 0;break;case 2:b={contents:_.contents,visibility:0}}if(void 0===b)return t;var g=d.e(t.fields,h,b);return{width:t.width,height:t.height,fields:g}}}function T(e){var t=e.onClick,n=e.onDoubleClick,i=e.children,a=s.useRef(0),c=s.useRef(void 0);return s.createElement("div",{onClick:function(e){e.preventDefault();var i=Date.now(),u=a.current+200>i;a.current=i;var o=c.current;if(void 0!==o&&clearTimeout(l.b(o)),u)return r.a(n,e);e.persist();var s=setTimeout((function(n){return r.a(t,e)}),200);c.current=l.a(s)}},i)}8!==a.c(g)&&v.a("nighbourDiff should contain exactly 8 items");function R(e,t){return e.fieldState===t.fieldState}var A=s.memo((function(e){var t,n,a=e.mines,c=e.field,u=e.fieldState,o=e.onClick,l=e.onDoubleClick;switch(u.visibility){case 0:t=0;break;case 1:t=u.contents?{mines:a}:2;break;case 2:t=1}if("number"===typeof t)switch(t){case 0:n=null;break;case 1:n="\ud83d\udea9";break;case 2:n="\ud83d\udca5"}else n=t.mines;var f="number"===typeof t?t>=2?"game__board-field--revealed":"":"game__board-field--revealed",d="number"===typeof t?t>=2?"game__board-field--exploded":"":"game__board-field--"+String(t.mines),m=i.a({hd:"game__board-field",tl:{hd:f,tl:{hd:d,tl:0}}});return s.createElement(T,{onClick:function(e){return r.a(o,c)},onDoubleClick:function(e){return r.a(l,c)},children:s.createElement("div",{className:m},s.createElement("button",{type:"button"},n))})}),R);function G(e,t){return S(t,e)}function J(e){var t,n=e.width,i=e.height,u=e.mines,o=s.useReducer(G,void 0,(function(e){return C(n,i,u)})),l=o[1],f=o[0],m=function(e){return e.width}(f),v=function(e){return e.height}(f),h=c(0,m),b=c(0,v),_=N(f),p=a.i(a.d(b,(function(e){return s.createElement("div",{key:String(e),className:"game__board-row"},a.i(a.d(h,(function(t){var n={x:t,y:e},i=function(e,t){return d.a(e.fields,t)}(f,n),a=1!==_||i.contents?i:{contents:0,visibility:2},c=k(f,n);return s.createElement(A,{mines:c,field:n,fieldState:a,onClick:function(e){return r.a(l,{TAG:2,_0:e})},onDoubleClick:function(e){return r.a(l,{TAG:1,_0:e})},key:String(t)})}))))})));switch(_){case 0:t="\ud83d\ude42";break;case 1:t="\ud83d\ude0e";break;case 2:t="\ud83d\ude35"}var g=w(f);return s.createElement("section",{className:"game__wrapper"},s.createElement("div",{className:"game"},s.createElement("div",{className:"game__header"},s.createElement("div",{className:"game__remaining-mines"},g),s.createElement("button",{className:"game__start-button",type:"button",onClick:function(e){return r.a(l,{TAG:0,_0:C(m,v,u)})}},t)),s.createElement("div",{className:"game__board"},p)),s.createElement("p",{className:"instructions"},"double-click to reveal a field / click to mark a field"))}var M=n(26);function z(e,t){return t._0}var H=function(e){var t,n=e.message,i=s.useReducer(z,void 0),a=i[1],c=i[0];if(void 0!==c){var u;switch(c){case 0:u=[9,9,10];break;case 1:u=[16,16,40];break;case 2:u=[30,16,99]}t=s.createElement(J,{width:u[0],height:u[1],mines:u[2]})}else t=s.createElement("div",{className:"difficulties__wrapper"},s.createElement("h3",void 0,"Choose difficulty"),s.createElement("div",{className:"difficulties"},s.createElement("button",{className:"difficulty",title:"Easy",type:"button",onClick:function(e){return r.a(a,{_0:0})}},"\ud83d\ude0c"),s.createElement("button",{className:"difficulty",title:"Normal",type:"button",onClick:function(e){return r.a(a,{_0:1})}},"\ud83d\ude10"),s.createElement("button",{className:"difficulty",title:"Hard",type:"button",onClick:function(e){return r.a(a,{_0:2})}},"\ud83d\ude31")));return s.createElement("div",{className:"app"},s.createElement("div",{className:"app__header"},s.createElement("a",{href:""},s.createElement("img",{className:"app__logo",alt:"logo",src:M})),s.createElement("h2",void 0,n),s.createElement("p",{className:"app__credits"},"by ",s.createElement("a",{href:"http://pewniak747.info",target:"_blank"},"Tomasz Pewi\u0144ski")," \xb7 ",s.createElement("a",{href:"https://github.com/pewniak747/minesweeper-reasonml",target:"_blank"},"source"))),s.createElement("div",{className:"app__intro"},t))},I=n(22);n(30),I.a(s.createElement(H,{message:"Minesweeper in ReScript & React"}),"root")}},[[24,1,2]]]);
//# sourceMappingURL=main.1f54f89a.chunk.js.map