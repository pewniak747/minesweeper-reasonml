(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,n){"use strict";var r=n(9);var a=r.shuffle;t.List=0,t.str=function(e){return e},t.arr=function(e){return e},t.range=function e(t,n){return t>=n?0:[t,e(t+1|0,n)]},t.cartesian=function(e,t){return r.flatten(r.map(e,function(e){return r.map(t,function(t){return[e,t]})}))},t.shuffle=a,t.take=function(e,t){var n=r.take(t,e);return void 0!==n?n:t}},23:function(e,t,n){e.exports=n(24)},24:function(e,t,n){"use strict";var r=n(25),a=n(55),i=n(7);n(64),a.renderToElementWithId(i.element(void 0,void 0,r.make("Minesweeper in ReasonML & React",[])),"root")},25:function(e,t,n){"use strict";var r=n(26),a=n(4),i=n(0),o=n(19),u=n(11),c=n(52),s=n(7);n(53);var l=s.reducerComponent("App");t.component=l,t.make=function(e,t){return[l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],function(t){var n,a=t[3],l=t[1];if(void 0!==l){var f;switch(l){case 0:f=[9,9,10];break;case 1:f=[16,16,40];break;case 2:f=[30,16,99]}n=s.element(void 0,void 0,r.make(f[0],f[1],f[2],[]))}else n=u.createElement("div",{className:"difficulties__wrapper"},u.createElement("h3",void 0,o.str("Choose difficulty")),u.createElement("div",{className:"difficulties"},u.createElement("button",{className:"difficulty",title:"Easy",type:"button",onClick:function(e){return i._1(a,[0])}},o.str("\ud83d\ude0c")),u.createElement("button",{className:"difficulty",title:"Normal",type:"button",onClick:function(e){return i._1(a,[1])}},o.str("\ud83d\ude10")),u.createElement("button",{className:"difficulty",title:"Hard",type:"button",onClick:function(e){return i._1(a,[2])}},o.str("\ud83d\ude31"))));return u.createElement("div",{className:"app"},u.createElement("div",{className:"app__header"},u.createElement("a",{href:""},u.createElement("img",{className:"app__logo",alt:"logo",src:c})),u.createElement("h2",void 0,o.str(e)),u.createElement("p",{className:"app__credits"},o.str("by "),u.createElement("a",{href:"http://pewniak747.info",target:"_blank"},o.str("Tomasz Pewi\u0144ski")),o.str(" \xb7 "),u.createElement("a",{href:"https://github.com/pewniak747/minesweeper-reasonml",target:"_blank"},o.str("source")))),u.createElement("div",{className:"app__intro"},n))},function(e){},l[11],function(e,t){return a.__(0,[e[0]])},l[13]]}},26:function(e,t,n){"use strict";var r=n(27),a=n(4),i=n(0),o=n(19),u=n(11),c=n(42),s=n(43),l=n(46),f=n(9),m=n(15),d=n(7),v=n(51),p=n(3);var _=c.MakeComparable([function(e,t){var n=p.caml_int_compare(e[0],t[0]);return 0!==n?n:p.caml_int_compare(e[1],t[1])}]),g=s.make(_),k=[g],h=l.make(_);var b=[h,function(e){return l.mergeMany(h,f.toArray(e))}],E=o.cartesian([-1,[0,[1,0]]],[-1,[0,[1,0]]]),S=f.keep(E,function(e){return 0!==e[0]||0!==e[1]});function w(e,t){var n=t[1],r=t[0],a=e[1],i=e[0],o=f.map(S,function(e){return[r+e[0]|0,n+e[1]|0]});return f.keep(o,function(e){var t=e[1],n=e[0];return n>=0&&n<i&&t>=0&&t<a})}function y(e,t){var n=w(e,t),r=f.map(n,function(t){return s.getExn(e[2],t)});return f.length(f.keep(r,function(e){return 0===e[0]}))}function N(e){var t=e[2];return s.size(s.keep(t,function(e,t){return 0===t[0]}))}function C(e){var t=e[2];return s.size(s.keep(t,function(e,t){return 2===t[1]}))}function x(e){var t=e[2];return s.size(s.keep(t,function(e,t){return 1===t[1]}))}function M(e){return N(e)-C(e)|0}function F(e){var t=e[2],n=s.some(t,function(e,t){return!t[0]&&1===t[1]}),r=s.some(t,function(e,t){return!!t[0]&&0===t[1]});return n?2:r?0:1}function T(e,t){return s.set(e,t[0],t[1])}function z(e,t,n,r){var a=o.range(0,e),i=o.range(0,t),u=o.cartesian(a,i);f.length(u)<=n&&m.failwith("Too many mines for the board");var c=o.take(n,o.shuffle(u)),s=l.mergeMany(h,f.toArray(c)),d=f.map(u,function(e){return[e,[l.has(s,e)?0:1,0]]});return[e,t,f.reduce(d,g,T)]}function A(e,t,n,r,a,i){for(;;){var o=e;if(s.getExn(o[2],a)[0])return o;0,e=z(t,n,r)}}function D(e,t,n){var r=s.getExn(e[2],t),a=y(e,t),i=l.add(n,t);if(0===a&&r[0]){var o=w(e,t);return f.reduce(o,i,function(t,n){return l.has(t,n)?t:D(e,n,t)})}return i}function R(e,t){return D(e,t,h)}function W(e,t){return s.mapWithKey(e[2],function(e,n){return l.has(t,e)?[n[0],1]:n})}function $(e,t){switch(0|e.tag){case 0:return a.__(0,[e[0]]);case 1:var n=e[0];if(0===F(t)){var r;if(0===x(t)){var i=N(t);r=A(t,t[0],t[1],i,n)}else r=t;if(1!==s.getExn(r[2],n)[1]){var o=R(r,n),u=W(r,o);return a.__(0,[[r[0],r[1],u]])}var c=w(r,n),m=f.partition(c,function(e){return s.getExn(r[2],e)[1]>=2}),d=y(r,n);if(f.length(m[0])===d){var v=f.map(m[1],function(e){return R(r,e)}),p=f.reduce(v,h,l.union),_=W(r,p);return a.__(0,[[r[0],r[1],_]])}return 0}return 0;case 2:var g=e[0];if(0===F(t)){var k,b=s.getExn(t[2],g),E=b[0];switch(b[1]){case 0:k=[E,2];break;case 1:k=void 0;break;case 2:k=[E,0]}if(void 0!==k){var S=s.set(t[2],g,k);return a.__(0,[[t[0],t[1],S]])}return 0}return 0}}8!==f.length(S)&&m.failwith("nighbourDiff should contain exactly 8 items");var L=d.statelessComponentWithRetainedProps("Field");function P(e,t,n,a,c,s){return[L[0],L[1],L[2],L[3],L[4],L[5],L[6],L[7],function(e){return e[0][2][0]!==e[1][2][0]},function(s){var l;switch(n[1]){case 0:l="";break;case 1:l=n[0]?String(e):"\ud83d\udca5";break;case 2:l="\ud83d\udea9"}var f=1!==n[1]?"":String("game__board-field")+"--revealed",m=n[0]&&1===n[1]?String("game__board-field")+"--"+String(e):"",p=n[0]||1!==n[1]?"":String("game__board-field")+"--exploded",_=r.make(["game__board-field",[f,[m,[p,0]]]]);return d.element(void 0,void 0,v.make(function(e){return i._1(a,t)},function(e){return i._1(c,t)},u.createElement("div",{className:_},u.createElement("button",{type:"button"},o.str(l)))))},L[10],[n],L[12],L[13]]}var J=[L,P],j=d.reducerComponent("Game");t.List=0,t.$$Map=0,t.$$Set=0,t.FieldsComparator=_,t.FieldsMap=k,t.FieldsSet=b,t.neighbourDiff=S,t.fieldNeighboursSelector=w,t.fieldStateSelector=function(e,t){return s.getExn(e[2],t)},t.adjacentMinesCountSelector=y,t.minesCountSelector=N,t.markedCountSelector=C,t.revealedCountSelector=x,t.remainingMinesCountSelector=M,t.gameStatusSelector=F,t.add2=T,t.initializeState=z,t.reinitializeStateWithSafeField=A,t.accumulateFieldsToReveal=D,t.fieldsToReveal=R,t.revealFields=W,t.isPlaying=function(e){return 0===F(e)},t.reducer=$,t.Field=J,t.component=j,t.make=function(e,t,n,r){return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],j[8],function(e){var t,r=e[3],c=e[1],l=o.range(0,c[0]),m=o.range(0,c[1]),v=F(c),p=o.arr(f.toArray(f.map(m,function(e){return u.createElement("div",{key:String(e),className:"game__board-row"},o.arr(f.toArray(f.map(l,function(t){var n=[t,e],o=s.getExn(c[2],n),u=1!==v||o[0]?o:[0,2],l=y(c,n);return d.element(String(t),void 0,P(l,n,u,function(e){return i._1(r,a.__(2,[e]))},function(e){return i._1(r,a.__(1,[e]))}))}))))})));switch(v){case 0:t="\ud83d\ude42";break;case 1:t="\ud83d\ude0e";break;case 2:t="\ud83d\ude35"}var _=M(c);return u.createElement("section",{className:"game__wrapper"},u.createElement("div",{className:"game"},u.createElement("div",{className:"game__header"},u.createElement("div",{className:"game__remaining-mines"},o.str(String(_))),u.createElement("button",{className:"game__start-button",type:"button",onClick:function(e){return i._1(r,a.__(0,[z(c[0],c[1],n)]))}},o.str(t))),u.createElement("div",{className:"game__board"},p)),u.createElement("p",{className:"instructions"},o.str("double-click to reveal a field / click to mark a field")))},function(r){return z(e,t,n)},j[11],$,j[13]]}},51:function(e,t,n){"use strict";var r=n(0),a=n(11),i=n(7),o=n(2),u=i.reducerComponent("DoubleClick");t.component=u,t.thresholdMs=200,t.make=function(e,t,n){return[u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8],function(i){var u=i[1];return a.createElement("div",{onClick:function(n){n.preventDefault();var a=Date.now(),i=u[0][0]+200>a;u[0][0]=a;var c=u[1][0];if(void 0!==c&&clearTimeout(o.valFromOption(c)),i)return r._1(t,n);n.persist();var s=setTimeout(function(t){return r._1(e,n)},200);return u[1][0]=o.some(s),0}},n)},function(e){return[[0],[void 0]]},u[11],function(e,t){return 0},u[13]]}},52:function(e,t,n){e.exports=n.p+"static/media/logo.e2342b05.svg"},53:function(e,t,n){},64:function(e,t,n){}},[[23,2,1]]]);
//# sourceMappingURL=main.225c9a90.chunk.js.map